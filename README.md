# 📚 PDF智能问答助手

一个基于RAG、Agent和分层记忆的PDF智能问答系统，支持语义检索、多查询扩展、混合检索和工具调用。

## 🚀 功能演示
![功能演示](assets/demo.gif)

## 📊 项目介绍
本项目是一款面向复杂文档的**智能问答系统**，能够深度理解PDF文档内容，为用户提供精准、高效的自然语言问答服务。

用户无需手动翻阅文档，只需输入问题即可快速获取对应答案，同时支持多轮对话上下文理解，大幅提升专业文档的阅读和信息提取效率。

系统可广泛应用于金融、法律、医疗等需要处理大量专业PDF文档的场景，帮助企业或个人快速定位关键信息、降低信息检索成本、提升工作效率。

## ✨ 核心特性

### 🚀 智能检索增强
- **混合检索策略**: 结合BM25关键词检索与Chroma向量检索，兼顾精准性与泛化性
- **多查询扩展**: 自动生成3个同义查询，提升检索召回率
- **异步并行检索**: 多查询并行执行，抵消扩展带来的耗时增加
- **文档重排序**: 使用交叉编码器对检索结果精排，提升相关性

### 🧠 智能对话能力
- **分层记忆管理**: 短期记忆(最近对话) + 长期记忆(历史摘要)，保持对话连贯性
- **Agent工具调用**: 内置3个专业工具，覆盖PDF查询核心场景
- **智能相关性判断**: 自动过滤无关问题，专注PDF内容问答
- **多级缓存优化**: LLM缓存+业务缓存，提升重复查询效率

### 🛠️ 专业工具支持
1. **PDF元信息查询**: 获取文档主题和核心关键词
2. **语义向量检索**: 基于混合检索技术查找相关内容片段
3. **页码精准查询**: 支持单页或页码范围的内容定位


### 示例对话

```
🚀 初始化PDF问答助手（分层记忆+自定义缓存+工具调用版）...
✅ 助手就绪！
📖 命令说明：
  - quit：退出程序
  - clear：清空对话记忆
  - clear_cache：清空所有缓存
  - 支持工具调用：查主题/关键词、查具体内容、按页码查内容
------------------------------------------------------------

请输入你的问题：这份PDF主要讲了什么？

📝 回答：这份PDF的核心主题是...

请输入你的问题：第5页有什么内容？

📝 回答：页码5对应内容：【页码5】...

请输入你的问题：今年的营收增速是多少？

📝 回答：根据文档内容，今年营收增速为...
📎 来源：工具调用结果
```


## 📊 性能优化

### 缓存策略
- **LLM原生缓存**: 内置LangChain缓存，减少重复API调用
- **业务级缓存**: 问答结果缓存 + 相关性判断缓存
- **PDF元信息缓存**: 避免重复提取文档主题和关键词

### 异步优化
- 多查询并行检索，提升召回率同时保持性能
- 同步包装器兼容现有架构，无需重构

### 内存管理
- 短期记忆限制轮数，防止上下文过长
- 长期记忆自动摘要，保留重要信息


## 📄 许可证

本项目采用Apache 2.0许可证。
